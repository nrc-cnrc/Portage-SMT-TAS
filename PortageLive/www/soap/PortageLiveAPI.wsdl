<?xml version ="1.0" encoding ="UTF-8"?> 
<definitions name="PortageLiveService" 
  targetNamespace="http://__REPLACE_THIS_WITH_YOUR_IP__/PortageLiveAPI.wsdl" 
  xmlns="http://schemas.xmlsoap.org/wsdl/"
  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
  xmlns:tns="http://__REPLACE_THIS_WITH_YOUR_IP__/PortageLiveAPI.wsdl"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<documentation>
  $Id$
  file: PortageLiveAPI.wsdl
  brief: Definition of the API to the Portage SMT software suite.
  author: Patrick Paul, Eric Joanis and Samuel Larkin

  Technologies langagières interactives / Interactive Language Technologies
  Institut de technologie de l'information / Institute for Information Technology
  Conseil national de recherches Canada / National Research Council Canada
  Copyright 2009 - 2012, Sa Majesté la Reine du Chef du Canada /
  Copyright 2009 - 2012, Her Majesty in Right of Canada
</documentation>

<message name="primeModelsRequest">
  <part name="context" type="xsd:string"/>
  <part name="PrimeMode" type="xsd:string"/>
</message>

<message name="getAllContextsRequest">
  <part name="verbose" type="xsd:boolean"/>
</message>

<message name="getTranslationRequest"> 
  <part name="srcString" type="xsd:string"/> 
</message> 

<message name="getTranslationResponse"> 
  <part name="Result" type="xsd:string"/> 
</message> 

<message name="translationToken">
  <part name="token" type="xsd:string"/>
</message>

<message name="getTranslation2Request">
  <part name="srcString" type="xsd:string"/>
  <part name="context" type="xsd:string"/>
</message>

<message name="translateTMXCERequest">
  <part name="TMXContentsBase64" type="xsd:string"/>
  <part name="TMXFilename" type="xsd:string"/>
  <part name="context" type="xsd:string"/>
  <part name="CETreshold" type="xsd:decimal"/>
</message>

<message name="translateSDLXLIFFCERequest">
  <part name="SDLXLIFFContentsBase64" type="xsd:string"/>
  <part name="SDLXLIFFFilename" type="xsd:string"/>
  <part name="context" type="xsd:string"/>
  <part name="CETreshold" type="xsd:decimal"/>
</message>


<portType name="PortageLive_Interface">
  <operation name="primeModels">
    <documentation>
    For a given context, load its models in memory according to PrimeMode.
    This is accomplished by calling prime.sh with PrimeMode in the context.
    The default prime.sh uses PrimeMode to partially (partial) or fully (full) load
    the models in memory.  User can define custom behaviors based on PrimeContext.
    Throws a SoapFault exception with fault code "PortageContext" if the
    context is not valid.
    Throws a SoapFault exception with fault code "PortagePrimeError" if the
    prime.sh script failed.
    Throws a SoapFault exception with fault code "PortageNoPrimeScript" if the
    context exists but doesn't have a prime.sh script.
    Throws a SoapFault exception in case of a protocol or connection error.
    </documentation>
    <input message="tns:primeModelsRequest"/>
    <output message="tns:getTranslationResponse"/>
  </operation>

  <operation name="getAllContexts">
    <documentation>
    Get the list of contexts installed on the PortageLive server.
    If verbose is true, each context includes a short description.
    If verbose is false, only the name of each context is provided.
    In all cases, the results are provided in a semi-colon separated list.
    Throws a SoapFault exception in case of a protocol or connection error.
    </documentation>
    <input message="tns:getAllContextsRequest"/>
    <output message="tns:getTranslationResponse"/>
  </operation>

  <operation name="getTranslation"> 
    <documentation>
    Translate text using the default context.  The result is the translation,
    one sentence per line.
    Throws SoapFault in case of problems.  If the faultcode is
    "PortageContext", the problem is with the context, if it is
    "PortageServer", the problem is with Portage server, otherwise some other
    problem occurred, normally described by the faultcode and explained by the
    faulstring.
    </documentation>
    <input message="tns:getTranslationRequest"/> 
    <output message="tns:getTranslationResponse"/> 
  </operation> 

  <operation name="getTranslation2">
    <documentation>
    Translate text using the specified context.  The result is the translation,
    one sentence per line.
    Throws SoapFault in case of problems.  If the faultcode is
    "PortageContext", the problem is with the context, if it is
    "PortageServer", the problem is with Portage server, otherwise some other
    problem occurred, normally described by the faultcode and explained by the
    faulstring.
    </documentation>
    <input message="tns:getTranslation2Request"/>
    <output message="tns:getTranslationResponse"/>
  </operation>

  <operation name="getTranslationCE">
    <documentation>
    Translate text using the specified context, and calculate confidence scores
    on the translation.  The result is the translation, one sentence per line,
    with the confidence score preceeding each translation, separated by a tab
    character.
    Throws SoapFault in case of problems.  If the faultcode is
    "PortageContext", the problem is with the context (including the case where
    the context does not support confidence estimation), if it is
    "PortageServer", the problem is with Portage server, otherwise some other
    problem occurred, normally described by the faultcode and explained by the
    faulstring.
    </documentation>
    <input message="tns:getTranslation2Request"/>
    <output message="tns:getTranslationResponse"/>
  </operation>

  <operation name="translateTMXCE">
    <documentation>
    Submit a request to translate a TMX file using the specified
    context.  TMXContentsBase64 is its contents in base64 encoding and
    TMXFilename is its name.  IF CETreshold is greater than 0, confidence
    estimation is used to filter out translations with confidence score below
    the threshold (valid value are between 0 and 1).
    Returns a token used to monitor the job.  The token can be used in one of
    two ways: it is a URL you can use to interactively monitor the job in a
    browser.  Or you can pass it as argument to translateTMXCE_Status().
    Throws SoapFault in case of problems.  If the faultcode is
    "PortageContext", the problem is with the context (including the case where
    the context does not support confidence estimation and CETreshold>0), if it
    is "PortageServer", the problem is with Portage server, otherwise some
    other problem occurred, normally described by the faultcode and explained
    by the faulstring.
    </documentation>
    <input message="tns:translateTMXCERequest"/>
    <output message="tns:translationToken"/>
  </operation>

  <operation name="translateTMXCE_Status">
    <documentation>
    Get the status of a job submitted using translateTMXCE().
    Returns a string containing a one digit code followed by a human readable
    description of the status.
    Valid codes are: 0: job completed successfully, 1: job in progress, 2: job
    finished but failed, 3: something is wrong with the token.
    If the code is 0, the result string will be "0 Done: result_url", where
    result_url is the URL where you can fetch the translated TMX via HTTP.
    If the code is 2, the result string will be "2 Failed: trace_url", where
    trace_url will let you see the error log for your job.
    If you are going to poll a job status repeatedly, it is recommended you
    insert a 5 second delay between successive requests.
    Throws a SoapFault exception in case of a protocol or connection error.
    </documentation>
    <input message="tns:translationToken"/>
    <output message="tns:getTranslationResponse"/>
  </operation>

  <operation name="translateSDLXLIFFCE">
    <documentation>
    Submit a request to translate a SDLXLIFF file using the specified
    context.  SDLXLIFFContentsBase64 is its contents in base64 encoding and
    SDLXLIFFFilename is its name.  IF CETreshold is greater than 0, confidence
    estimation is used to filter out translations with confidence score below
    the threshold (valid value are between 0 and 1).
    Returns a token used to monitor the job.  The token can be used in one of
    two ways: it is a URL you can use to interactively monitor the job in a
    browser.  Or you can pass it as argument to translateSDLXLIFFCE_Status().
    Throws SoapFault in case of problems.  If the faultcode is
    "PortageContext", the problem is with the context (including the case where
    the context does not support confidence estimation and CETreshold>0), if it
    is "PortageServer", the problem is with Portage server, otherwise some
    other problem occurred, normally described by the faultcode and explained
    by the faulstring.
    </documentation>
    <input message="tns:translateSDLXLIFFCERequest"/>
    <output message="tns:translationToken"/>
  </operation>

  <operation name="translateSDLXLIFFCE_Status">
    <documentation>
    Get the status of a job submitted using translateSDLXLIFFCE().
    Returns a string containing a one digit code followed by a human readable
    description of the status.
    Valid codes are: 0: job completed successfully, 1: job in progress, 2: job
    finished but failed, 3: something is wrong with the token.
    If the code is 0, the result string will be "0 Done: result_url", where
    result_url is the URL where you can fetch the translated SDLXLIFF via HTTP.
    If the code is 2, the result string will be "2 Failed: trace_url", where
    trace_url will let you see the error log for your job.
    If you are going to poll a job status repeatedly, it is recommended you
    insert a 5 second delay between successive requests.
    Throws a SoapFault exception in case of a protocol or connection error.
    </documentation>
    <input message="tns:translationToken"/>
    <output message="tns:getTranslationResponse"/>
  </operation>
</portType>


<binding name="PortageLive_SoapHttpBinding" type="tns:PortageLive_Interface">
  <soap:binding style="rpc"
    transport="http://schemas.xmlsoap.org/soap/http"/>

  <operation name="primeModels">
    <soap:operation soapAction="primeModels"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="getAllContexts">
    <soap:operation soapAction="getAllContexts"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="getTranslation"> 
    <soap:operation soapAction="getTranslation"/> 
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input> 
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="getTranslation2">
    <soap:operation soapAction="getTranslation2"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="getTranslationCE">
    <soap:operation soapAction="getTranslationCE"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="translateTMXCE">
    <soap:operation soapAction="translateTMXCE"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="translateTMXCE_Status">
    <soap:operation soapAction="translateTMXCE_Status"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output> 
  </operation> 

  <operation name="translateSDLXLIFFCE">
    <soap:operation soapAction="translateSDLXLIFFCE"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

  <operation name="translateSDLXLIFFCE_Status">
    <soap:operation soapAction="translateSDLXLIFFCE_Status"/>
    <input> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                       namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </input>
    <output> <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                        namespace="urn:cnrc-nrc:portageliveservice" use="encoded"/>
    </output>
  </operation>

</binding> 


<service name="PortageLive_Service"> 
  <documentation>Definition of the PortageLive Service</documentation>
  <port name="PortageLive_Library" binding="tns:PortageLive_SoapHttpBinding">
    <soap:address location="http://__REPLACE_THIS_WITH_YOUR_IP__/PortageLiveAPI.php"/>
  </port>
</service> 

</definitions> 
