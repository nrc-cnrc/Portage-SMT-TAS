<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="plive.cgi" resourceRoot="" soapui-version="5.0.0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings/>
  <con:testSuite name="plive.cgi">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Landing page - TestCase" searchProperties="true" id="ffb94dd4-e90b-4e41-8eb9-cb538fff2c4c">
      <con:settings/>
      <con:testStep type="httprequest" name="HTTP Test Request">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="HTTP Test Request" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There are some contexts">
            <con:configuration>
              <path>count(//select[@name = "context"]/option) > 1</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>endpoint</con:name>
        <con:value>${#Project#endpoint}</con:value>
      </con:property>
      <con:property>
        <con:name>context</con:name>
        <con:value>${#Project#context.toy_en2fr}</con:value>
      </con:property>
    </con:properties>
  </con:testSuite>
  <con:testSuite name="TextBox Translation">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Translate with TextBox - TestCase" searchProperties="true" id="3dc1b7ae-a782-40fa-9b0b-ac8acc901e14">
      <con:settings/>
      <con:testStep type="httprequest" name="Simple request" id="78fd6b2b-f0b0-4df6-a9ea-486c73ad2f5b">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Simple request" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Validate the translation">
            <con:configuration>
              <path>//div[@id = "translation"]/p[1]</path>
              <content>C'est une test.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>This is a test.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Presence of Translation section" id="d03d72e5-d21e-46b3-9bd4-98432d3be232">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Presence of Translation section" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Validate the translation">
            <con:configuration>
              <path>//div[@id = "translation"]/p[1]</path>
              <content>C'est une test.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be a Source section">
            <con:configuration>
              <path>exists(//div[@id = "source"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be a paragraph that holds the source text in the Source section">
            <con:configuration>
              <path>count(//div[@id = "source"]/p)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be a Target section">
            <con:configuration>
              <path>exists(//div[@id = "translation"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be a paragraph that holds the translation in the Target section">
            <con:configuration>
              <path>count(//div[@id = "translation"]/p)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>This is a test.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Debugging Tools" id="3afa67c0-49b5-46dc-b6c9-d267a5fc7428">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Debugging Tools" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be three debugging tools">
            <con:configuration>
              <path>count(//ul[@id = "debuggingToolsList"]/li)</path>
              <content>3</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be a link to translate more text">
            <con:configuration>
              <path>exists(//a[@id = "translateMore"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be an Out-Of-Vocabulary link">
            <con:configuration>
              <path>exists(//ul[@id = "debuggingToolsList"]/li/a[@id = "oov"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be an phrase alignment link">
            <con:configuration>
              <path>exists(//ul[@id = "debuggingToolsList"]/li/a[@id = "pal"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be an trace link">
            <con:configuration>
              <path>exists(//ul[@id = "debuggingToolsList"]/li/a[@id = "trace"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>This is a test.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Invalid context" id="28768eff-4498-42ab-a546-83cd6fa539f8">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Invalid context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be an error message for the invalid context">
            <con:configuration>
              <path>//div[@id = "problemDescription"]/p</path>
              <content>Invalid context ("InvalidContext") specified.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>InvalidContext</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>This is a test.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>do</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="xtags Request" id="52d1305b-8c38-4a23-97c4-d6911af24238">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="xtags Request" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Validate the translation">
            <con:configuration>
              <path>//div[@id = "translation"]/p[1]</path>
              <content><![CDATA[<p>&lt;blue>C'&lt;red>est&lt;/red> une test.&lt;/blue></p>]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>&lt;blue>This &lt;red>is&lt;/red> a test.&lt;/blue></con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>text_xtags</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="one sentence per line Request" id="8a61d361-ad2c-4708-bd25-f447e6c3d545">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="one sentence per line Request" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be 1 paragraph">
            <con:configuration>
              <path>count(//div[@id = "translation"]/p)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The first and only paragraph should have three lines">
            <con:configuration>
              <path>count(tokenize(replace(data(//div[@id = "translation"]/p[1]), '\s+\n\s+', "	"), '\t'))</path>
              <content>3</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>I eat an apple.  It is apple picking time.${="\r\n"}The car is blue.${="\r\n\r\n"}It is Friday.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>s</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="one paragraph per line Request" id="47a56b13-d80e-4f23-8007-065784f77ff3">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="one paragraph per line Request" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be 3 paragraphs">
            <con:configuration>
              <path>count(//div[@id = "translation"]/p)</path>
              <content>3</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The first paragraph should have two sentences">
            <con:configuration>
              <path>count(tokenize(//div[@id = "translation"]/p[1]/text()[1], "\.\s+")[. ne ''])</path>
              <content>2</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The second paragraph should have one sentence">
            <con:configuration>
              <path>count(tokenize(//div[@id = "translation"]/p[2]/text(), "\.\s+")[. ne ''])</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The third paragraph should have one sentence">
            <con:configuration>
              <path>count(tokenize(//div[@id = "translation"]/p[3]/text(), "\.\s+")[. ne ''])</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>I eat an apple.  It is apple picking time.${="\r\n"}The car is blue.${="\r\n\r\n"}It is Friday.${="\r\n"}</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Blank lines mark paragraph Request" id="0ae107c5-46d3-4fbb-9ce0-aff1a7c0c1e6">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="Blank lines mark paragraph Request" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="There should be 2 paragraphs aka lines in the translation">
            <con:configuration>
              <path>count(//div[@id = "translation"]/p)</path>
              <content>2</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The first paragraph should have three sentences">
            <con:configuration>
              <path>count(tokenize(replace(data(//div[@id = "translation"]/p[1]), '\s+\n\s+', "	"), '\t'))</path>
              <content>3</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The second paragraph should have one sentence">
            <con:configuration>
              <path>count(normalize-space(tokenize(//div[@id = "translation"]/p[2]/text(), "\.\s+"))[. ne ''])</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>I eat an apple.  It is apple picking time.${="\r\n"}The car is blue.${="\r\n\r\n"}It is Friday.${="\r\n"}</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>w</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Phrase Table - TestCase" searchProperties="true" id="63abd7c2-46eb-4740-92db-61d43950afa2">
      <con:settings/>
      <con:testStep type="httprequest" name="Generate phrase table" id="ad7499bf-85ef-4b4d-896b-c3bb11e20262">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Generate phrase table" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Validate the translation">
            <con:configuration>
              <path>//div[@id = "translation"]/p[1]</path>
              <content>C'est une test.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Verify there is a link to triangArray">
            <con:configuration>
              <path>exists(//ul[@id = "debuggingToolsList"]/li/a[@id = "triangArray"])</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestSuite#context}</con:value>
              <con:style>QUERY</con:style>
              <con:default>toy-regress-en2fr</con:default>
              <con:path xsi:nil="true"/>
              <con:description xsi:nil="true"/>
            </con:parameter>
            <con:parameter>
              <con:name>source_text</con:name>
              <con:value>This is a test.</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_text</con:name>
              <con:value>do</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>newline</con:name>
              <con:value>p</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>enable_phrase_table_debug</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Get Phrase Table's URL" id="0ee71ece-55c6-4259-92c8-edcbc9556218">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Get Phrase Table's URL</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Generate phrase table</con:sourceStep>
            <con:sourcePath>//ul[@id = "debuggingToolsList"]/li/a[@id = "triangArray"]/@href</con:sourcePath>
            <con:targetType>phraseTableURL</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Fetch phrase table" id="de9d4f91-3800-42bf-bf18-cda8a47cbc4f">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Fetch phrase table" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://${#Project#ServerName}/${#TestCase#phraseTableURL}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="GroovyScriptAssertion" name="This should return a non empty file containing the phrase table">
            <con:configuration>
              <scriptText>assert !messageExchange.responseHeaders["Content-Length"].isEmpty()
assert (messageExchange.responseHeaders["Content-Length"].get(0).toInteger() > 0)</scriptText>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:tearDownScript>for (prop in ["phraseTableURL"]) {
	testCase.setPropertyValue(prop, "")
}</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>phraseTableURL</con:name>
          <con:value/>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>endpoint</con:name>
        <con:value>${#Project#endpoint}</con:value>
      </con:property>
      <con:property>
        <con:name>context</con:name>
        <con:value>${#Project#context.toy_en2fr}</con:value>
      </con:property>
    </con:properties>
  </con:testSuite>
  <con:testSuite name="Translate XLIFF">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Translate minimalist XLIFF - TestCase" searchProperties="true" id="3c5227e9-d665-4914-b541-8f2be844ab14">
      <con:settings/>
      <con:testStep type="httprequest" name="Submit translation">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="Submit translation" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="GroovyScriptAssertion" name="Extract the monitoring URL">
            <con:configuration>
              <scriptText>log.info(messageExchange.getRequestContent())
log.info(messageExchange.getEndpoint())
context.getTestCase().setPropertyValue("monitoringToken", messageExchange.getEndpoint())</scriptText>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:attachment>
            <con:name>test.minimalist.sdlxliff</con:name>
            <con:contentType>application/octet-stream</con:contentType>
            <con:size>211</con:size>
            <con:contentId>filename</con:contentId>
            <con:url>C:/temp/sopaui.examples/test.minimalist.sdlxliff</con:url>
            <con:data>UEsDBBQACAgIANxqR0cAAAAAAAAAAAAAAAAYAAAAdGVzdC5taW5pbWFsaXN0LnNkbHhsaWZmTY7BCsMgEETvgfyDN09NaY8S8y/bZLXCZg26FvP3jSm0ncsOAzNvx0rBOfXClENkq2/DXfed+qiuxNnqkthEyCEbhhWzkdmcLbPEuazIYlpr6rvRBUIVU/CBgax+IlEcpIpWOZY044WAfQGPViNrJZA8yl/o0g++gIDs25FuBIEFj5nGeMRlb/f6NY16mvOr6Q1QSwcIpnnsJpIAAADTAAAAUEsBAhQAFAAICAgA3GpHR6Z57CaSAAAA0wAAABgAAAAAAAAAAAAAAAAAAAAAAHRlc3QubWluaW1hbGlzdC5zZGx4bGlmZlBLBQYAAAAAAQABAEYAAADYAAAAAAA=</con:data>
            <con:id>ba1bcc7e-a19e-4f6a-b307-9e4eec49de48</con:id>
          </con:attachment>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestCase#context}</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>is_xml</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>file_xtags</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_file</con:name>
              <con:value>Translate File</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for the translation to be finished">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Inspect the monitoring page">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Inspect the monitoring page" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestCase#monitoringToken}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Conditional Goto">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Need some more time</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(: not(//div[@id="translationLink"]//a/@href) :)
(: As long as the page says to reload, we will wait. :)
exists(//head/meta[@http-equiv = "refresh"])</con:expression>
            <con:targetStep>Wait for the translation to be finished</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Get the translation URL">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Get URL</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Inspect the monitoring page</con:sourceStep>
            <con:sourcePath>//div[@id="translationLink"]//a/@href</con:sourcePath>
            <con:targetType>translationURL</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Get Translations">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Get Translations" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>http://${#Project#ServerName}/${#TestCase#translationURL}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="We should get a xliff with an empty body tag.">
            <con:configuration>
              <path>/*:xliff/*:file/*:body</path>
              <content>&lt;urn:body xmlns:urn="urn:oasis:names:tc:xliff:document:1.2"/></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:tearDownScript>for (prop in ["monitoringToken", "translationURL"]) {
	testCase.setPropertyValue(prop, "")
}</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>context</con:name>
          <con:value>${#TestSuite#context}</con:value>
        </con:property>
        <con:property>
          <con:name>monitoringToken</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>translationURL</con:name>
          <con:value/>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Translate XLIFF with xtags - TestCase" searchProperties="true" id="3370b448-2d98-4e7a-82c3-5d983e47b29d">
      <con:settings/>
      <con:testStep type="httprequest" name="Submit translation" id="4f4327e9-573b-4c8e-8c73-661a2fcfb977">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="Submit translation" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="GroovyScriptAssertion" name="Extract the monitoring URL">
            <con:configuration>
              <scriptText>log.info(messageExchange.getRequestContent())
log.info(messageExchange.getEndpoint())
context.getTestCase().setPropertyValue("monitoringToken", messageExchange.getEndpoint())</scriptText>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:attachment>
            <con:name>test.xtags.xliff</con:name>
            <con:contentType>application/octet-stream</con:contentType>
            <con:size>307</con:size>
            <con:contentId>filename</con:contentId>
            <con:data>UEsDBBQACAgIAMthPEcAAAAAAAAAAAAAAAAQAAAAdGVzdC54dGFncy54bGlmZk1PO04EMQztkbhDtE2q2RGUUWZqrmEmnhCROCvHWWbPRsGRuAJJEGIbf9/H/v78skcM+66uyCVkWvTT+VmrI0Uqi65MJkMJxRAkLEY2M9DG5a0mJDEdvT4+2D1EVJmDDwRx0W8YYz7LIVqVXHnDKQL5Ch4XjaSVAHuUu+HOWjkQkNuldZcIgQQbvWu/ZnfrWRioTJWCqOCaRxjbgn769Vht4neVhsSpjU/rSz9DWUa3fmSOzs69tHPDtXjHbDrzv/xo/1zn/tooxuvrD1BLBwh7fTU1zAAAADMBAABQSwECFAAUAAgICADLYTxHe301NcwAAAAzAQAAEAAAAAAAAAAAAAAAAAAAAAAAdGVzdC54dGFncy54bGlmZlBLBQYAAAAAAQABAD4AAAAKAQAAAAA=</con:data>
            <con:id>ec24a97b-7460-4f5f-ab43-c3dae19b2b82</con:id>
          </con:attachment>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestCase#context}</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>is_xml</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>file_xtags</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_file</con:name>
              <con:value>Translate File</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for the translation to be finished" id="ddb896f3-cb79-44ac-bb7f-ecb5edde345f">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Inspect the monitoring page" id="70ed4e32-b28d-4a9a-abbf-0190a8d0ff8a">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Inspect the monitoring page" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestCase#monitoringToken}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Conditional Goto" id="ab8c0599-7f23-4774-ad3b-057e4b3fd964">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Need some more time</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(: not(//div[@id="translationLink"]//a/@href) :)
(: As long as the page says to reload, we will wait. :)
exists(//head/meta[@http-equiv = "refresh"])</con:expression>
            <con:targetStep>Wait for the translation to be finished</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Get the translation URL" id="a5c21519-9b7e-4e33-9dc8-6755043f15ad">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Get URL</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Inspect the monitoring page</con:sourceStep>
            <con:sourcePath>//div[@id="translationLink"]//a/@href</con:sourcePath>
            <con:targetType>translationURL</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Get Translations" id="0f281692-df83-4079-83a2-b0f047128cdb">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Get Translations" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>http://${#Project#ServerName}/${#TestCase#translationURL}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="We should find a red tag in the seg-source">
            <con:configuration>
              <path>count(/*:xliff/*:file/*:body/*:trans-unit/*:seg-source/*:mrk/*:red)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="We should find a red tag in the target">
            <con:configuration>
              <path>count(/*:xliff/*:file/*:body/*:trans-unit/*:target/*:mrk/*:red)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The red tag should contain the translation for world">
            <con:configuration>
              <path>/*:xliff/*:file/*:body/*:trans-unit/*:target/*:mrk/*:red</path>
              <content>monde.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:tearDownScript>for (prop in ["monitoringToken", "translationURL"]) {
	testCase.setPropertyValue(prop, "")
}</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>context</con:name>
          <con:value>${#TestSuite#context}</con:value>
        </con:property>
        <con:property>
          <con:name>monitoringToken</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>translationURL</con:name>
          <con:value/>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Translate XLIFF - TestCase" searchProperties="true">
      <con:settings/>
      <con:testStep type="httprequest" name="Submit translation">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" name="Submit translation" postQueryString="true" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>${#TestSuite#endpoint}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="GroovyScriptAssertion" name="Extract the monitoring URL">
            <con:configuration>
              <scriptText>log.info(messageExchange.getRequestContent())
log.info(messageExchange.getEndpoint())
context.getTestCase().setPropertyValue("monitoringToken", messageExchange.getEndpoint())</scriptText>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:attachment>
            <con:name>test.xtags.xliff</con:name>
            <con:contentType>application/octet-stream</con:contentType>
            <con:size>307</con:size>
            <con:contentId>filename</con:contentId>
            <con:data>UEsDBBQACAgIAMthPEcAAAAAAAAAAAAAAAAQAAAAdGVzdC54dGFncy54bGlmZk1PO04EMQztkbhDtE2q2RGUUWZqrmEmnhCROCvHWWbPRsGRuAJJEGIbf9/H/v78skcM+66uyCVkWvTT+VmrI0Uqi65MJkMJxRAkLEY2M9DG5a0mJDEdvT4+2D1EVJmDDwRx0W8YYz7LIVqVXHnDKQL5Ch4XjaSVAHuUu+HOWjkQkNuldZcIgQQbvWu/ZnfrWRioTJWCqOCaRxjbgn769Vht4neVhsSpjU/rSz9DWUa3fmSOzs69tHPDtXjHbDrzv/xo/1zn/tooxuvrD1BLBwh7fTU1zAAAADMBAABQSwECFAAUAAgICADLYTxHe301NcwAAAAzAQAAEAAAAAAAAAAAAAAAAAAAAAAAdGVzdC54dGFncy54bGlmZlBLBQYAAAAAAQABAD4AAAAKAQAAAAA=</con:data>
            <con:id>ec24a97b-7460-4f5f-ab43-c3dae19b2b82</con:id>
          </con:attachment>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>context</con:name>
              <con:value>${#TestCase#context}</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>is_xml</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>file_xtags</con:name>
              <con:value>on</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>filter</con:name>
              <con:value>no filtering</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>translate_file</con:name>
              <con:value>Translate File</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for the translation to be finished">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Inspect the monitoring page">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Inspect the monitoring page" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#TestCase#monitoringToken}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Conditional Goto">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Need some more time</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(: not(//div[@id="translationLink"]//a/@href) :)
(: As long as the page says to reload, we will wait. :)
exists(//head/meta[@http-equiv = "refresh"])</con:expression>
            <con:targetStep>Wait for the translation to be finished</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Get the translation URL">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Get URL</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Inspect the monitoring page</con:sourceStep>
            <con:sourcePath>//div[@id="translationLink"]//a/@href</con:sourcePath>
            <con:targetType>translationURL</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Get Translations">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" name="Get Translations" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:encoding>UTF-8</con:encoding>
          <con:endpoint>http://${#Project#ServerName}/${#TestCase#translationURL}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="We should find a red tag in the seg-source">
            <con:configuration>
              <path>count(/*:xliff/*:file/*:body/*:trans-unit/*:seg-source/*:mrk/*:red)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="We should find a red tag in the target">
            <con:configuration>
              <path>count(/*:xliff/*:file/*:body/*:trans-unit/*:target/*:mrk/*:red)</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="The red tag should contain the translation for world">
            <con:configuration>
              <path>/*:xliff/*:file/*:body/*:trans-unit/*:target/*:mrk/*:red</path>
              <content>monde.</content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:authType>No Authorization</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:tearDownScript>for (prop in ["monitoringToken", "translationURL"]) {
	testCase.setPropertyValue(prop, "")
}</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>context</con:name>
          <con:value>${#TestSuite#context}</con:value>
        </con:property>
        <con:property>
          <con:name>monitoringToken</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>translationURL</con:name>
          <con:value/>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>endpoint</con:name>
        <con:value>${#Project#endpoint}</con:value>
      </con:property>
      <con:property>
        <con:name>context</con:name>
        <con:value>${#Project#context.toy_en2fr}</con:value>
      </con:property>
    </con:properties>
  </con:testSuite>
  <con:properties>
    <con:property>
      <con:name>ServerName</con:name>
      <con:value>132.246.128.219</con:value>
    </con:property>
    <con:property>
      <con:name>Service</con:name>
      <con:value>cgi-bin/plive.cgi</con:value>
    </con:property>
    <con:property>
      <con:name>endpoint</con:name>
      <con:value>http://${#Project#ServerName}/${#Project#Service}</con:value>
    </con:property>
    <con:property>
      <con:name>context.toy_en2fr</con:name>
      <con:value>toy-regress-en2fr</con:value>
    </con:property>
  </con:properties>
  <con:wssContainer/>
  <con:oAuth2ProfileContainer/>
  <con:sensitiveInformation/>
</con:soapui-project>
